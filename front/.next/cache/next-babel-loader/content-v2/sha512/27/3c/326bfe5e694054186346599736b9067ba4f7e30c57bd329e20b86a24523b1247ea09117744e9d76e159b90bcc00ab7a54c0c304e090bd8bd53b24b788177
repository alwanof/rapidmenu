{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useContext } from 'react';\nimport dynamic from 'next/dynamic';\nimport { Modal } from '@redq/reuse-modal';\nimport ProductSingleWrapper, { ProductSingleContainer } from 'assets/styles/product-single.style';\nimport { getProductBySlug } from 'utils/api/product';\nimport { useRouter } from 'next/router';\nimport { ConfigContext } from 'contexts/config/config.context';\nimport { getConfig } from 'utils/api/config';\nimport { SEO } from 'components/seo';\nconst ProductDetails = dynamic(() => import('components/product-details/product-details-four/product-details-four'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-details/product-details-four/product-details-four')],\n    modules: ['components/product-details/product-details-four/product-details-four']\n  }\n});\nconst ProductDetailsBakery = dynamic(() => import('components/product-details/product-details-five/product-details-five'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-details/product-details-five/product-details-five')],\n    modules: ['components/product-details/product-details-five/product-details-five']\n  }\n});\nconst ProductDetailsGrocery = dynamic(() => import('components/product-details/product-details-six/product-details-six'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-details/product-details-six/product-details-six')],\n    modules: ['components/product-details/product-details-six/product-details-six']\n  }\n});\nconst CartPopUp = dynamic(() => import('features/carts/cart-popup'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('features/carts/cart-popup')],\n    modules: ['features/carts/cart-popup']\n  }\n});\n\n/*export async function getStaticProps({ params }) {\n  const data = await getProductBySlug(params.slug);\n  return {\n    props: {\n      data,\n    },\n  };\n}\nexport async function getStaticPaths() {\n  const products = await getAllProducts();\n  return {\n    paths: products.map(({ slug }) => ({ params: { slug } })),\n    fallback: true,\n  };\n}*/\nexport async function getServerSideProps({\n  params,\n  query\n}) {\n  var _config$restaurant;\n\n  const config = await getConfig(query.code);\n  const data = await getProductBySlug(config === null || config === void 0 ? void 0 : (_config$restaurant = config.restaurant) === null || _config$restaurant === void 0 ? void 0 : _config$restaurant.slug, params.slug);\n  return {\n    props: {\n      data,\n      config\n    }\n  };\n}\n\nconst ProductDetailsPage = ({\n  data,\n  deviceType,\n  config\n}) => {\n  const router = useRouter();\n  let targetConfig = config;\n\n  if (!targetConfig || !targetConfig.qrcode) {\n    const configContext = useContext(ConfigContext);\n    targetConfig = configContext.config;\n  }\n\n  if (router.isFallback) return /*#__PURE__*/_jsx(\"p\", {\n    children: \"Loading...\"\n  });\n\n  let content = /*#__PURE__*/_jsx(ProductDetails, {\n    product: data,\n    deviceType: deviceType,\n    config: targetConfig\n  });\n  /*if (data.type === 'bakery') {\n    content = <ProductDetailsBakery product={data} deviceType={deviceType} />;\n  }\n  if (data.type === 'grocery') {\n    content = <ProductDetailsGrocery product={data} deviceType={deviceType} />;\n  }*/\n\n\n  return /*#__PURE__*/_jsxs(Modal, {\n    children: [/*#__PURE__*/_jsx(SEO, {\n      title: config.qrcode.title + \" | \" + data.mainTitle,\n      description: config.description\n    }), /*#__PURE__*/_jsx(ProductSingleWrapper, {\n      children: /*#__PURE__*/_jsxs(ProductSingleContainer, {\n        children: [content, /*#__PURE__*/_jsx(CartPopUp, {\n          deviceType: deviceType,\n          config: targetConfig\n        })]\n      })\n    })]\n  });\n};\n\nexport default ProductDetailsPage;","map":null,"metadata":{},"sourceType":"module"}